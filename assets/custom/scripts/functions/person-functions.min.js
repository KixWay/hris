var PersonFunctions=function(){var c=window.location.protocol;var a=window.location.hostname;var b=window.location.port;if(a.replace(":"+b,"")=="localhost"){a+=(b.length>0?":"+b:"")+"/iapps4egov"}var d=c+"//"+a+"/";var e=function(){function f(){$("#person-list").remove();var i=$("input.input-firstname").val();var k=$("input.input-middlename").val();var j=$("input.input-lastname").val();var h=$("input.input-extensionname").val();var g=$("input.input-birthday").val();var l=$("input.input-firstname").attr("data-url");if(i.length==0||k.length==0||j.length==0){return false}$.ajax({url:d+"person/checkPerson",method:"POST",data:{firstname:i,middlename:k,lastname:j,extensionname:h,birthday:g},dataType:"json",success:function(o){if(o){var m="";m+="<div class='modal fade bs-modal-lg' id='person-list' tabindex='-1' role='dialog' aria-hidden='true'>";m+="<div class='modal-dialog modal-lg'>";m+="<div class='modal-content'>";m+="<div class='modal-header'>";m+="<button type='button' class='close' data-dismiss='modal' aria-hidden='true'></button>";m+="<h4 class='modal-title bold text-info'>A person with the same name already exists in the database. Click attach if that is the same person, click close if not.</h4>";m+="</div>";m+="<div class='modal-body'>";m+="<table class='table table-responsive table-striped font-sm' id='table1'>";m+="<thead>";m+="<tr>";m+="<th>Item</th>";m+="<th>Name</th>";m+="<th>Birthday</th>";m+="<th>Gender</th>";m+="<th>MaritalStatus</th>";m+="<th>Address</th>";m+="<th>Attach</th>";m+="</tr>";m+="<tbody>";var n=1;$.each(o,function(q,p){m+="<tr>";m+="<td>"+n+"</td>";m+="<td>"+p.FirstName+" "+p.MiddleName+" "+p.LastName+" "+p.ExtensionName+"</td>";m+="<td>"+p.Birthday+"</td>";m+="<td>"+p.Gender+"</td>";m+="<td>"+p.MaritalStatus+"</td>";m+="<td>"+p.BarangayName+", "+p.CityMunicipalityName+", "+p.ProvinceName+"</td>";m+="<td><a href='"+l+"person_id/"+p.PersonID+"' class='btn btn-xs btn-default'>Attach</a></td>";m+="</tr>";n++});m+="</tbody>";m+="</table>";m+="</div>";m+="<div class='modal-footer'>";m+="<button type='button' class='btn default' data-dismiss='modal'>Close</button>";m+="</div>";m+="</div>";m+="</div>";m+="</div>";$(".input-firstname").parents(".form-group").append(m);$("#person-list").modal("show")}},error:function(m){console.log(m)}})}$(".input-firstname").blur(function(){f()});$(".input-middlename").blur(function(){f()});$(".input-lastname").blur(function(){f()})};return{init:function(){e()}}}();